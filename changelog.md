# Changelog

## v2.1.0 - Feature: 引導線標籤樣式 (2025-11-17)

### ✨ **New Features**
- **🔗 引導線標籤標記樣式**
  - 新增第五種標記樣式「引導線標籤」，完美解決標記重疊遮擋問題
  - **固定中心點**：在地號實際位置顯示小圓點標記
  - **可拖曳文字標籤**：文字方塊可自由拖動到任意位置
  - **動態連接線**：虛線連接中心點與文字標籤，拖動時即時更新
  - **智慧偏移設計**：文字標籤預設偏移至右上方約 80 公尺，避免擋住中心點

- **🎨 引導線自訂設定**
  - **線條粗細調整**：1-5px 可調，預設 2px
  - **線條顏色選擇**：5 種顏色可選（深灰/灰/淺灰/紅/藍），預設灰色
  - **透明度控制**：0-70% 透明度可調，預設 70% 透明
  - 所有設定整合在標記設定面板中

### 🎯 **使用場景**
- 當多個地號位置相近時，可拖動文字標籤避免重疊
- 截圖時可調整標籤位置，避免遮擋重要設施或地標
- 連接線確保始終能清楚看出每個標籤對應的地塊
- 可自訂線條樣式，使引導線在不同背景下都清晰可見

### 🛠️ **技術改進**
- 使用 Leaflet LayerGroup 組合三個元素（中心點、連接線、文字標籤）
- 使用 block scope 避免變數衝突
- 監聽 drag 事件動態更新 polyline 座標
- 修改 updateAllMarkers 函數以支援 LayerGroup 類型標記
- 透明度轉換邏輯：數值越高線條越透明（opacity = 1 - transparency/100）

---

## v2.0.0 - Modern UI Redesign (2025-11-04)

### ✨ **New Features**
- **全新現代化介面設計**
  - 採用 Bootstrap 5.3.2 響應式框架
  - 左右分欄布局（查詢區 + 地圖區）
  - 精緻的漸層配色與陰影效果

- **5 種標記樣式選擇**
  - 📝 文字標籤
  - 📍 標準 Marker
  - 🏷️ Marker + 文字
  - ⚫ 小圓點
  - 🔗 引導線標籤（v2.1.0 新增）

- **文字大小控制**
  - 滑桿調整文字大小（10-24px）
  - 快速預設按鈕（小/中/大/特大）

- **改進的使用者體驗**
  - 摺疊式結果表格
  - 優化的說明彈窗
  - 更直覺的控制面板

---

## v1.0.0 - Initial Release
### 🛠 Feature: 基本地圖標示功能
- **支援地號轉經緯度查詢**
  - 透過 `Leaflet.js` 顯示地圖
  - 允許輸入多筆地號並顯示對應位置
- **基本標記 (Marker) 功能**
  - 標示「勘估標的」與「比較標的」
  - 可自訂標記顏色（紅色 & 藍色）

---

## v1.1.1 - Feature: 自訂標記設定面板 & 可拖曳標記 (2025-02-02)
### ✨ **New Features**
- **Customizable Marker Appearance**
  - 使用者可**編輯標記文字**（可輸入數字或「比較標的1,2,3」）。
  - 可選擇標記的**背景顏色**（紅、藍、綠、橘、黃）。
  - **新增標記類型**：
    - 預設標記（Leaflet 內建 Marker）
    - 自訂標記（可更改文字樣式）
  - **標記可拖曳移動**，支援使用者手動調整標記位置。

- **New UI Enhancements**
  - **浮動設定面板**：可在地圖上調整標記顏色、標記類型。
  - **新增顯示/隱藏按鈕**：可以控制標記與框線的顯示狀態。

- **Improvement: Map Visibility**
  - 調整地圖高度，使其符合螢幕大小 (`calc(100vh - 100px)`)。
  - 優化按鈕間距，讓 UI 更整齊美觀。

---

## v1.1.2 - Fix: 地號輸入格式 & API 查詢錯誤修正 (2025-02-02)
### 🛠 **Bug Fixes**
#### ✅ Fix: 地號輸入格式
- 允許使用者輸入 `地號`，系統自動轉換為 `號`，確保 API 正確識別。
- **Updated `formatLandInput()` function**，避免誤刪除地號前面的地段名稱

---

## v1.1.3 - Fix: 地名標準化 & 地號格式修正 (2025-02-04)
### 🛠 Fixes
- **修正 API 無法辨識台灣地名的問題**
  - 自動將輸入的 `台北`、`台中`、`台南`、`台東` **轉換為** `臺北`、`臺中`、`臺南`、`臺東`，確保 API 可以正確識別。


## v1.1.4 - Feature: 隨機範例地號 (2025-02-05)

### ✨ **New Features**
- **隨機範例地址功能**  
  - 新增「填入範例」按鈕，可隨機帶入三～四組預設地號範例，方便快速測試。